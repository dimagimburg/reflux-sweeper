{"version":3,"sources":["../../src/Components/BoardPiece.js"],"names":[],"mappings":";;;;;;;;gCAAuB,sBAAsB;;;;8BACpB,oBAAoB;;;;+BACvB,qBAAqB;;;;AAE3C,IAAI,UAAU,GAAG,KAAK,CAAC,WAAW,CAAC;;;;;;;;;AAQ/B,aAAS,EAAE;AACP,UAAE,EAAE,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,UAAU;AACrC,cAAM,EAAE,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU;AACvC,kBAAU,EAAE,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU;AAC3C,mBAAW,EAAE,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,UAAU;AAC9C,cAAM,EAAE,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU;KAC1C;;AAED,yBAAqB,EAAE,+BAAS,SAAS,EAAC,SAAS,EAAC;AAChD,eAAO,IAAI,CAAC,KAAK,CAAC,UAAU,KAAK,SAAS,CAAC,UAAU,IAC9C,SAAS,CAAC,MAAM,KAAK,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;KACjD;;AAED,cAAU,EAAE,sBAAU;AAClB,YAAG,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,CAAC,6BAAU,UAAU,EAAE,EAAC;AACvE,wCAAa,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;SAC1C;KACJ;;AAED,cAAU,EAAA,oBAAC,CAAC,EAAE;AACV,SAAC,CAAC,cAAc,EAAE,CAAC;AACnB,YAAG,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,KAAK,6BAAU,aAAa,EAAE,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,CAAA,AAAC,IAAI,CAAC,6BAAU,UAAU,EAAE,EAAC;AACrG,wCAAa,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;SAC1C;KACJ;;AAED,UAAM,EAAA,kBAAG;AACL,YAAI,OAAO,GAAG,UAAU,CAAC;AACrB,yBAAa,EAAE,IAAI;AACnB,2BAAe,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM;AAC3D,2BAAe,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM;AAC5D,kBAAM,EAAG,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW;AAC/E,kBAAM,EAAG,IAAI,CAAC,KAAK,CAAC,MAAM;SAC7B,CAAC,CAAC;;AAEH,eACI;;cAAK,SAAS,EAAE,OAAO,AAAC,EAAC,OAAO,EAAE,IAAI,CAAC,UAAU,AAAC,EAAC,aAAa,EAAE,IAAI,CAAC,UAAU,AAAC;YAAE,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,EAAE;SAAO,CACjJ;KACL;CACJ,CAAC,CAAC;;qBAEY,UAAU","file":"BoardPiece.js","sourcesContent":["import BoardStore from '../Stores/BoardStore';\r\nimport BoardActions from '../Actions/Actions';\r\nimport GameStore from '../Stores/GameStore';\r\n\r\nlet BoardPiece = React.createClass({\r\n\r\n    // state should be controlled by the store because when reveal tile\r\n    // it overrides the current state by the props, we can choose to manage\r\n    // the state by the props that we get from the store or we could manage\r\n    // it locally, or both of them which is more expensive. i tend to use\r\n    // the store option because events and listeners make sense to me.\r\n\r\n    propTypes: {\r\n        id: React.PropTypes.number.isRequired,\r\n        isMine: React.PropTypes.bool.isRequired,\r\n        isRevealed: React.PropTypes.bool.isRequired,\r\n        minesAround: React.PropTypes.number.isRequired,\r\n        isFlag: React.PropTypes.bool.isRequired\r\n    },\r\n\r\n    shouldComponentUpdate: function(nextProps,nextState){\r\n        return this.props.isRevealed !== nextProps.isRevealed\r\n            || nextProps.isFlag !== this.props.isFlag;\r\n    },\r\n\r\n    revealTile: function(){\r\n        if(!this.props.isFlag && !this.props.isRevealed && !GameStore.isGameOver()){\r\n            BoardActions.revealTile(this.props.id);\r\n        }\r\n    },\r\n\r\n    toggleFlag(e) {\r\n        e.preventDefault();\r\n        if(!this.props.isRevealed && (GameStore.getFlagsCount() || this.props.isFlag) && !GameStore.isGameOver()){\r\n            BoardActions.toggleFlag(this.props.id);\r\n        }\r\n    },\r\n\r\n    render() {\r\n        var classes = classNames({\r\n            'board-piece': true,\r\n            'revealed-mine': this.props.isRevealed && this.props.isMine,\r\n            'revealed-tile': this.props.isRevealed && !this.props.isMine,\r\n            'safe' : this.props.isRevealed && !this.props.isMine && !this.props.minesAround,\r\n            'flag' : this.props.isFlag\r\n        });\r\n\r\n        return (\r\n            <div className={classes} onClick={this.revealTile} onContextMenu={this.toggleFlag}>{this.props.minesAround ? this.props.minesAround : ''}</div>\r\n        );\r\n    }\r\n});\r\n\r\nexport default BoardPiece;"]}