{"version":3,"sources":["../../src/Stores/GameStore.js"],"names":[],"mappings":";;;;;;;;8BAAoB,sBAAsB;;;;AAE1C,IAAI,KAAK,GAAG,MAAM,CAAC,WAAW,CAAC;;AAE3B,eAAW,6BAAS;;AAEpB,QAAI,EAAA,gBAAG;AACH,YAAI,CAAC,QAAQ,GAAG,aAAa,CAAC;AAC9B,YAAI,CAAC,IAAI,GAAG,EAAE,CAAC;AACf,YAAI,CAAC,IAAI,GAAG,EAAE,CAAC;AACf,YAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;AACtB,YAAI,CAAC,KAAK,GAAG,CAAC,CAAC;AACf,YAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,IAAI,CAAC,IAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAA,CAAC,AAAC,CAAC,CAAC;AACpE,YAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;AACxB,YAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AACpB,YAAI,CAAC,GAAG,GAAG,KAAK,CAAC;KACpB;;AAED,eAAW,EAAA,uBAAE;AACT,YAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,IAAI,CAAC,IAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAA,CAAC,AAAC,CAAC,CAAC;KACvE;;AAED,WAAO,EAAA,mBAAG;AACN,eAAO;AACH,oBAAQ,EAAE,IAAI,CAAC,QAAQ;AACvB,kBAAM,EAAE,IAAI,CAAC,MAAM;AACnB,iBAAK,EAAE,IAAI,CAAC,KAAK;AACjB,iBAAK,EAAE,IAAI,CAAC,KAAK;AACjB,iBAAK,EAAE,IAAI,CAAC,KAAK;AACjB,gBAAI,EAAE,IAAI,CAAC,IAAI;AACf,gBAAI,EAAE,IAAI,CAAC,IAAI;AACf,eAAG,EAAE,IAAI,CAAC,GAAG;SAChB,CAAC;KACL;;AAED,iBAAa,EAAA,yBAAG;AACZ,eAAO,IAAI,CAAC,KAAK,CAAC;KACrB;;AAED,cAAU,EAAA,sBAAG;AACT,eAAO,IAAI,CAAC,QAAQ,CAAC;KACxB;;AAED,cAAU,EAAA,sBAAG;AACT,YAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AACrB,YAAI,CAAC,UAAU,EAAE,CAAC;KACrB;;AAED,aAAS,EAAA,qBAAG;AACR,YAAI,CAAC,WAAW,EAAE,CAAC;AACnB,YAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;AACtB,YAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AACpB,YAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;AACxB,YAAI,CAAC,UAAU,EAAE,CAAC;KACrB;;AAED,sBAAkB,EAAA,8BAAG;AACjB,YAAI,CAAC,KAAK,EAAE,CAAC;AACb,YAAI,CAAC,UAAU,EAAE,CAAC;KACrB;;AAED,wBAAoB,EAAA,gCAAG;AACnB,YAAI,CAAC,KAAK,EAAE,CAAC;AACb,YAAI,CAAC,UAAU,EAAE,CAAC;KACrB;;AAED,YAAQ,EAAA,oBAAG;AACP,YAAG,CAAC,IAAI,CAAC,MAAM,EAAC;AACZ,gBAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACnB,gBAAI,CAAC,UAAU,EAAE,CAAC;SACrB;KACJ;;AAED,mBAAe,EAAA,2BAAE;AACb,YAAG,IAAI,CAAC,KAAK,GAAG,CAAC,EAAC;AACd,gBAAI,CAAC,KAAK,EAAE,CAAC;AACb,gBAAI,CAAC,WAAW,EAAE,CAAC;AACnB,wCAAQ,OAAO,EAAE,CAAC;SACrB;KACJ;;AAED,mBAAe,EAAA,2BAAE;AACb,YAAG,IAAI,CAAC,KAAK,GAAG,CAAC,EAAC;AACd,gBAAI,CAAC,KAAK,EAAE,CAAC;AACb,gBAAI,CAAC,WAAW,EAAE,CAAC;AACnB,wCAAQ,OAAO,EAAE,CAAC;SACrB;KACJ;;AAED,iBAAa,EAAA,uBAAC,IAAI,EAAC;AACf,YAAI,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;AACzB,oCAAQ,OAAO,EAAE,CAAC;KACrB;;AAED,iBAAa,EAAA,uBAAC,IAAI,EAAC;AACf,YAAI,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC;AACzB,oCAAQ,OAAO,EAAE,CAAC;KACrB;;AAED,aAAS,EAAA,qBAAE;AACP,YAAI,CAAC,GAAG,GAAG,IAAI,CAAC;AAChB,oCAAQ,QAAQ,EAAE,CAAC;KACtB;;AAED,cAAU,EAAA,sBAAG;AACT,YAAI,CAAC,OAAO,CACR,IAAI,CAAC,OAAO,EAAE,CACjB,CAAC;KACL;;CAEJ,CAAC,CAAC;;qBAEY,KAAK","file":"GameStore.js","sourcesContent":["import Actions from './../Actions/Actions';\r\n\r\nlet Store = Reflux.createStore({\r\n\r\n    listenables: Actions,\r\n\r\n    init() {\r\n        this.username = 'dimagimburg';\r\n        this.rows = 20;\r\n        this.cols = 20;\r\n        this.gameOver = false;\r\n        this.level = 1;\r\n        this.mines = parseInt(this.rows * this.cols * (1/(6 - this.level)));\r\n        this.flags = this.mines;\r\n        this.gameOn = false;\r\n        this.win = false;\r\n    },\r\n\r\n    updateMines(){\r\n        this.mines = parseInt(this.rows * this.cols * (1/(6 - this.level)));\r\n    },\r\n\r\n    getGame() {\r\n        return {\r\n            gameOver: this.gameOver,\r\n            gameOn: this.gameOn,\r\n            flags: this.flags,\r\n            mines: this.mines,\r\n            level: this.level,\r\n            cols: this.cols,\r\n            rows: this.rows,\r\n            win: this.win\r\n        };\r\n    },\r\n\r\n    getFlagsCount() {\r\n        return this.flags;\r\n    },\r\n\r\n    isGameOver() {\r\n        return this.gameOver;\r\n    },\r\n\r\n    onGameOver() {\r\n        this.gameOver = true;\r\n        this.updateGame();\r\n    },\r\n\r\n    onNewGame() {\r\n        this.updateMines();\r\n        this.gameOver = false;\r\n        this.gameOn = false;\r\n        this.flags = this.mines;\r\n        this.updateGame();\r\n    },\r\n\r\n    onReduceFlagsCount() {\r\n        this.flags--;\r\n        this.updateGame();\r\n    },\r\n\r\n    onIncreaseFlagsCount() {\r\n        this.flags++;\r\n        this.updateGame();\r\n    },\r\n\r\n    onGameOn() {\r\n        if(!this.gameOn){\r\n            this.gameOn = true;\r\n            this.updateGame();\r\n        }\r\n    },\r\n\r\n    onIncreaseLevel(){\r\n        if(this.level < 4){\r\n            this.level++;\r\n            this.updateMines();\r\n            Actions.newGame();\r\n        }\r\n    },\r\n\r\n    onDecreaseLevel(){\r\n        if(this.level > 0){\r\n            this.level--;\r\n            this.updateMines();\r\n            Actions.newGame();\r\n        }\r\n    },\r\n\r\n    onColsChanged(cols){\r\n        this.cols = Number(cols);\r\n        Actions.newGame();\r\n    },\r\n\r\n    onRowsChanged(rows){\r\n        this.rows = Number(rows);\r\n        Actions.newGame();\r\n    },\r\n\r\n    onWinGame(){\r\n        this.win = true;\r\n        Actions.gameOver();\r\n    },\r\n\r\n    updateGame() {\r\n        this.trigger(\r\n            this.getGame()\r\n        );\r\n    }\r\n\r\n});\r\n\r\nexport default Store;\r\n"]}